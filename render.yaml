services:
  # ==========================================
  # API GATEWAY
  # ==========================================
  - type: web
    name: blood-gateway
    env: docker
    rootDir: blood-system/gateway-service
    plan: free
    numInstances: 1
    envVars:
      - key: PORT
        value: 10000
      - key: JWT_SECRET
        sync: false
      - key: NODE_ENV
        value: production
      # Internal Service URLs (Render Internal DNS)
      - key: AUTH_SERVICE_URL
        value: http://blood-auth:10000
      - key: DONOR_SERVICE_URL
        value: http://blood-donor:10000
      - key: INVENTORY_SERVICE_URL
        value: http://blood-inventory:10000
      - key: REQUEST_SERVICE_URL
        value: http://blood-request:10000

  # ==========================================
  # AUTH SERVICE
  # ==========================================
  - type: web
    name: blood-auth
    env: docker
    rootDir: blood-system/auth-service
    plan: free
    numInstances: 1
    envVars:
      - key: PORT
        value: 10000
      - key: JWT_SECRET
        sync: false
      - key: MONGODB_URI
        sync: false
      - key: NODE_ENV
        value: production

  # ==========================================
  # DONOR SERVICE
  # ==========================================
  - type: web
    name: blood-donor
    env: docker
    rootDir: blood-system/donor-service
    plan: free
    numInstances: 1
    envVars:
      - key: PORT
        value: 10000
      - key: JWT_SECRET
        sync: false
      - key: MONGODB_URI
        sync: false
      - key: NODE_ENV
        value: production

  # ==========================================
  # INVENTORY SERVICE
  # ==========================================
  - type: web
    name: blood-inventory
    env: docker
    rootDir: blood-system/inventory-service
    plan: free
    numInstances: 1
    envVars:
      - key: PORT
        value: 10000
      - key: JWT_SECRET
        sync: false
      - key: MONGODB_URI
        sync: false
      - key: NODE_ENV
        value: production

  # ==========================================
  # REQUEST SERVICE
  # ==========================================
  - type: web
    name: blood-request
    env: docker
    rootDir: blood-system/request-service
    plan: free
    numInstances: 1
    envVars:
      - key: PORT
        value: 10000
      - key: JWT_SECRET
        sync: false
      - key: MONGODB_URI
        sync: false
      - key: NODE_ENV
        value: production
