FAIL src/Pages/__tests__/BloodBankLogin.test.jsx
  ‚óè BloodBankLogin ‚Ä∫ renders login form correctly

    TypeError: Cannot redefine property: location
        at Object.defineProperty (<anonymous>)

    [0m [90m 58 |[39m     [90m// Mock window.location[39m
     [90m 59 |[39m     [36mdelete[39m window[33m.[39mlocation[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [33mObject[39m[33m.[39mdefineProperty(window[33m,[39m [32m'location'[39m[33m,[39m {
     [90m    |[39m            [31m[1m^[22m[39m
     [90m 61 |[39m       value[33m:[39m {
     [90m 62 |[39m         port[33m:[39m [32m'5174'[39m[33m,[39m
     [90m 63 |[39m         href[33m:[39m [32m''[39m[33m,[39m[0m

      at Object.defineProperty (src/Pages/__tests__/BloodBankLogin.test.jsx:60:12)

  ‚óè BloodBankLogin ‚Ä∫ handles regular login submission

    TypeError: Cannot redefine property: location
        at Object.defineProperty (<anonymous>)

    [0m [90m 58 |[39m     [90m// Mock window.location[39m
     [90m 59 |[39m     [36mdelete[39m window[33m.[39mlocation[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [33mObject[39m[33m.[39mdefineProperty(window[33m,[39m [32m'location'[39m[33m,[39m {
     [90m    |[39m            [31m[1m^[22m[39m
     [90m 61 |[39m       value[33m:[39m {
     [90m 62 |[39m         port[33m:[39m [32m'5174'[39m[33m,[39m
     [90m 63 |[39m         href[33m:[39m [32m''[39m[33m,[39m[0m

      at Object.defineProperty (src/Pages/__tests__/BloodBankLogin.test.jsx:60:12)

  ‚óè BloodBankLogin ‚Ä∫ handles Google login

    TypeError: Cannot redefine property: location
        at Object.defineProperty (<anonymous>)

    [0m [90m 58 |[39m     [90m// Mock window.location[39m
     [90m 59 |[39m     [36mdelete[39m window[33m.[39mlocation[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [33mObject[39m[33m.[39mdefineProperty(window[33m,[39m [32m'location'[39m[33m,[39m {
     [90m    |[39m            [31m[1m^[22m[39m
     [90m 61 |[39m       value[33m:[39m {
     [90m 62 |[39m         port[33m:[39m [32m'5174'[39m[33m,[39m
     [90m 63 |[39m         href[33m:[39m [32m''[39m[33m,[39m[0m

      at Object.defineProperty (src/Pages/__tests__/BloodBankLogin.test.jsx:60:12)

  ‚óè BloodBankLogin ‚Ä∫ handles Google login error

    TypeError: Cannot redefine property: location
        at Object.defineProperty (<anonymous>)

    [0m [90m 58 |[39m     [90m// Mock window.location[39m
     [90m 59 |[39m     [36mdelete[39m window[33m.[39mlocation[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [33mObject[39m[33m.[39mdefineProperty(window[33m,[39m [32m'location'[39m[33m,[39m {
     [90m    |[39m            [31m[1m^[22m[39m
     [90m 61 |[39m       value[33m:[39m {
     [90m 62 |[39m         port[33m:[39m [32m'5174'[39m[33m,[39m
     [90m 63 |[39m         href[33m:[39m [32m''[39m[33m,[39m[0m

      at Object.defineProperty (src/Pages/__tests__/BloodBankLogin.test.jsx:60:12)

  ‚óè BloodBankLogin ‚Ä∫ handles API error for Google login

    TypeError: Cannot redefine property: location
        at Object.defineProperty (<anonymous>)

    [0m [90m 58 |[39m     [90m// Mock window.location[39m
     [90m 59 |[39m     [36mdelete[39m window[33m.[39mlocation[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [33mObject[39m[33m.[39mdefineProperty(window[33m,[39m [32m'location'[39m[33m,[39m {
     [90m    |[39m            [31m[1m^[22m[39m
     [90m 61 |[39m       value[33m:[39m {
     [90m 62 |[39m         port[33m:[39m [32m'5174'[39m[33m,[39m
     [90m 63 |[39m         href[33m:[39m [32m''[39m[33m,[39m[0m

      at Object.defineProperty (src/Pages/__tests__/BloodBankLogin.test.jsx:60:12)

FAIL src/Pages/__tests__/UserDashboard.test.jsx
  ‚óè Console

    console.log
      üîç Auto-selection check triggered:

      at log (src/Pages/UserDashboard.jsx:762:13)

    console.log
        Blood Bank Selected:

      at log (src/Pages/UserDashboard.jsx:763:13)

    console.log
        MRID Entered:

      at log (src/Pages/UserDashboard.jsx:764:13)

    console.log
        Total Patients Loaded: 0

      at log (src/Pages/UserDashboard.jsx:765:13)

    console.log
      ‚è∏Ô∏è Skipping auto-selection (missing criteria)

      at log (src/Pages/UserDashboard.jsx:768:15)

    console.log
      üîç Auto-selection check triggered:

      at log (src/Pages/UserDashboard.jsx:762:13)

    console.log
        Blood Bank Selected:

      at log (src/Pages/UserDashboard.jsx:763:13)

    console.log
        MRID Entered:

      at log (src/Pages/UserDashboard.jsx:764:13)

    console.log
        Total Patients Loaded: 0

      at log (src/Pages/UserDashboard.jsx:765:13)

    console.log
      ‚è∏Ô∏è Skipping auto-selection (missing criteria)

      at log (src/Pages/UserDashboard.jsx:768:15)

    console.log
      üîç Auto-selection check triggered:

      at log (src/Pages/UserDashboard.jsx:762:13)

    console.log
        Blood Bank Selected:

      at log (src/Pages/UserDashboard.jsx:763:13)

    console.log
        MRID Entered:

      at log (src/Pages/UserDashboard.jsx:764:13)

    console.log
        Total Patients Loaded: 0

      at log (src/Pages/UserDashboard.jsx:765:13)

    console.log
      ‚è∏Ô∏è Skipping auto-selection (missing criteria)

      at log (src/Pages/UserDashboard.jsx:768:15)

    console.log
      üîç Auto-selection check triggered:

      at log (src/Pages/UserDashboard.jsx:762:13)

    console.log
        Blood Bank Selected:

      at log (src/Pages/UserDashboard.jsx:763:13)

    console.log
        MRID Entered:

      at log (src/Pages/UserDashboard.jsx:764:13)

    console.log
        Total Patients Loaded: 0

      at log (src/Pages/UserDashboard.jsx:765:13)

    console.log
      ‚è∏Ô∏è Skipping auto-selection (missing criteria)

      at log (src/Pages/UserDashboard.jsx:768:15)

    console.log
      üìä Patients Response: { success: true, data: [] }

      at log (src/Pages/UserDashboard.jsx:494:15)

    console.log
      ‚úÖ Patients loaded: 0

      at log (src/Pages/UserDashboard.jsx:498:17)

    console.log
      üîç Auto-selection check triggered:

      at log (src/Pages/UserDashboard.jsx:762:13)

    console.log
        Blood Bank Selected:

      at log (src/Pages/UserDashboard.jsx:763:13)

    console.log
        MRID Entered:

      at log (src/Pages/UserDashboard.jsx:764:13)

    console.log
        Total Patients Loaded: 0

      at log (src/Pages/UserDashboard.jsx:765:13)

    console.log
      ‚è∏Ô∏è Skipping auto-selection (missing criteria)

      at log (src/Pages/UserDashboard.jsx:768:15)

  ‚óè UserDashboard Component ‚Ä∫ direct booking modal opens

    Found multiple elements with the text: /Send Donation Request/i

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<h3[39m
      [33mclass[39m=[32m"mb-4 text-2xl font-bold text-gray-900 dark:text-white"[39m
    [36m>[39m
      [0mü©∏ Send Donation Request[0m
    [36m</h3>[39m

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"flex-1 bg-gradient-to-r from-pink-600 to-purple-500 text-white py-3 px-4 rounded-xl font-semibold hover:from-pink-700 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition"[39m
    [36m>[39m
      [0m‚ù§Ô∏è Send Donation Request[0m
    [36m</button>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"fixed inset-0 min-h-screen w-full overflow-auto bg-gradient-to-br from-rose-50 via-red-50 to-amber-100 dark:from-slate-900 dark:via-neutral-900 dark:to-black"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"pointer-events-none absolute -top-24 -left-24 h-72 w-72 rounded-full bg-rose-400/40 blur-3xl dark:bg-rose-600/30"[39m
          [36m/>[39m
          [36m<div[39m
            [33mclass[39m=[32m"pointer-events-none absolute top-32 -right-16 h-80 w-80 rounded-full bg-red-500/30 blur-3xl dark:bg-amber-500/20"[39m
          [36m/>[39m
          [36m<div[39m
            [33mclass[39m=[32m"pointer-events-none absolute -bottom-24 left-1/2 h-96 w-96 -translate-x-1/2 rounded-full bg-pink-400/20 blur-3xl dark:bg-fuchsia-600/20"[39m
          [36m/>[39m
          [36m<header[39m
            [33mclass[39m=[32m"relative z-10"[39m
          [36m>[39m
            [36m<nav[39m
              [33mclass[39m=[32m"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-5 md:px-6"[39m
            [36m>[39m
              [36m<a[39m
                [33mclass[39m=[32m"flex items-center gap-3"[39m
                [33mdata-discover[39m=[32m"true"[39m
                [33mhref[39m=[32m"/"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-rose-500 to-red-600 text-white shadow-lg ring-1 ring-black/10 dark:ring-white/10"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-xl"[39m
                  [36m>[39m
                    [0mü©∏[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-tight"[39m
                [36m>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-lg font-extrabold tracking-tight bg-gradient-to-r from-rose-600 to-red-600 bg-clip-text text-transparent dark:from-rose-300 dark:to-amber-200"[39m
                  [36m>[39m
                    [0mBlood Donation[0m
                  [36m</p>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-300"[39m
                  [36m>[39m
                    [0mConnect. Donate. Save lives.[0m
                  [36m</p>[39m
                [36m</div>[39m
              [36m</a>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"skeleton h-12 w-12 rounded-full bg-white/20 backdrop-blur-md"[39m
                [36m/>[39m
              [36m</div>[39m
            [36m</nav>[39m
          [36m</header>[39m
          [36m<main[39m
            [33mclass[39m=[32m"relative z-10 mx-auto w-full max-w-7xl px-4 pb-16 md:px-6 md:pb-24"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"mx-auto w-full max-w-6xl mb-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"rounded-2xl border border-white/30 bg-gradient-to-r from-pink-500/10 via-purple-500/10 to-blue-500/10 p-6 shadow-xl backdrop-blur-2xl transition dark:border-white/10"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-6"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-shrink-0 relative"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"w-20 h-20 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg ring-4 ring-white/20 hover:ring-pink-300 transition-all cursor-pointer overflow-hidden"[39m
                    [36m>[39m
                      [36m<span />[39m
                    [36m</button>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1"[39m
                  [36m>[39m
                    [36m<h1[39m
                      [33mclass[39m=[32m"text-3xl font-bold text-gray-900 dark:text-white mb-1"[39m
                    [36m>[39m
                      [0mWelcome back, [0m
                      [0mUser[0m
                      [0m! üëã[0m
                    [36m</h1>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-gray-600 dark:text-gray-400 text-sm"[39m
                    [36m>[39m
                      [0mManage your profile, find donors, and track donation requests[0m
                    [36m</p>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex gap-3 mt-2"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center gap-1 px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200 rounded-full text-xs font-semibold"[39m
                      [36m>[39m
                        [0müë§ [0m
                        [0mUser[0m
                      [36m</span>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"hidden lg:flex gap-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-center px-4 py-2 bg-white/50 dark:bg-gray-800/50 rounded-lg"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-2xl font-bold text-pink-600 dark:text-pink-400"[39m
                      [36m>[39m
                        [0m0[0m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
                      [36m>[39m
                        [0mSent[0m
                      [36m</div>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-center px-4 py-2 bg-white/50 dark:bg-gray-800/50 rounded-lg"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-2xl font-bold text-blue-600 dark:text-blue-400"[39m
                      [36m>[39m
                        [0m0[0m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
                      [36m>[39m
                        [0mReceived[0m
                      [36m</div>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center mb-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex flex-wrap bg-white/20 rounded-full p-1 backdrop-blur-md gap-1"[39m
              [36m>[39m
                [36m...

    [0m [90m 206 |[39m     fireEvent[33m.[39mclick(bookButtons[[35m0[39m])[33m;[39m
     [90m 207 |[39m
    [31m[1m>[22m[39m[90m 208 |[39m     [36mawait[39m waitFor(() [33m=>[39m {
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 209 |[39m       expect(screen[33m.[39mgetByText([35m/Send Donation Request/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 210 |[39m     })[33m;[39m
     [90m 211 |[39m   })[33m;[39m[0m

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at src/Pages/__tests__/UserDashboard.test.jsx:208:18
      at Generator.call (src/Pages/__tests__/UserDashboard.test.jsx:2:1)
      at Generator._invoke [as next] (src/Pages/__tests__/UserDashboard.test.jsx:2:1)
      at asyncGeneratorStep (src/Pages/__tests__/UserDashboard.test.jsx:2:1)
      at asyncGeneratorStep (src/Pages/__tests__/UserDashboard.test.jsx:2:1)

Test Suites: 2 failed, 2 total
Tests:       6 failed, 3 passed, 9 total
Snapshots:   0 total
Time:        3.837 s, estimated 4 s
Ran all test suites matching UserDashboard|BloodBankLogin.
